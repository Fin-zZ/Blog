(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{424:function(t,s,a){"use strict";a.r(s);var n=a(25),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"程序性能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#程序性能"}},[t._v("#")]),t._v(" 程序性能")]),t._v(" "),a("p",[t._v("宏观方面的性能优化:\n如 多个请求的并发还是顺序，因为一切一切要保证用户体验")]),t._v(" "),a("p",[t._v("所以也希望多线程\nh5 新增了Worker概念，可以实现出独一的多线程部分 Web Worker,\n重点就是可以将程序划分为多个块运行。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" w1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Worker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("url指向一个js文件的位置，而不是html页面。该文件将加载到一个Worker中，\n然后浏览器启动一个独立的线程，让该文件能够在线程中运作。")]),t._v(" "),a("p",[t._v("Worker与主程序之间，不会共享任何作用域或者资源，\n而是通过一个基本的事件消息机制相互联系。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("w1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"message"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// event.data...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 也可以发送"message"事件给这个Worker')]),t._v("\nw1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("postMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"balabala"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通过terminate可以终止")]),t._v("\nw1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("terminate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("在Worker内部是无法访问主程序任何资源的，所以全局变量或者DOM都不能访问到。\n但是呢，可以发送请求，有几个全局变量可以，比如 navigator，location，JSON，applicationCache。")]),t._v(" "),a("p",[t._v("可以用于以下方面（推测）：")]),t._v(" "),a("ul",[a("li",[t._v("处理密集型数学")]),t._v(" "),a("li",[t._v("大数据集的排序")]),t._v(" "),a("li",[t._v("数据处理 压缩、音频分析、影像处理等")]),t._v(" "),a("li",[t._v("高流量网络通信等")])])])}),[],!1,null,null,null);s.default=e.exports}}]);